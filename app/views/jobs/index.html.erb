<div ng-controller="SearchCtrl">

  <header 
    class="page-header" 
    style="
      background-image: url('wood_pattern.png'); 
      padding:60px 0;
      margin:0;">
    <div class="container">
      <div 
        class="well col-md-6 col-md-offset-3"
        style="
          background:rgba(255,255,255,0.70);
          border:0;
          margin-bottom:0;">
        <h1 class="text-uppercase" style="font-size:28px;margin-top:0;">Search for jobs</h1>
        <form role="form">
          <input 
            type="search" 
            class="form-control" 
            placeholder="Job title..." 
            ng-model="query"
            style="font-size:24px;height:56px;padding:10px 20px;">
        </form>
      </div><!-- /.well -->
    </div>
  </header>

  <!--
  <div class="btn-group" role="group">
    <button 
      type="button" 
      class="btn btn-default"
      ng-click="setCurrentOrigin(null)">
      All
    </button>
    <button 
      ng-repeat="origin in origins"
      type="button" 
      class="btn btn-default" 
      ng-repeat="origin in origins" 
      ng-click="setCurrentOrigin(origin)" 
      ng-class="{'active':isCurrentOrigin(origin)}">
      {{origin.name}}
    </button>
  </div>
  -->

<div class="container" style="margin-top:10px;">
  <div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12">

      <div class="panel panel-primary">
        <div class="panel-heading">
          <p ng-if="query">
            Number of jobs currently displayed by your search: <u>{{filteredJobs.length}}</u>.
          </p>

          <p>
            Total jobs listed: {{jobs.length}}.
          </p>
        </div>
        <div class="panel-body" ng-if="filteredJobs.length < 1">
          <h2 class="text-center" >
            No jobs meet your search criteria.
          </h2>
        </div>

        <table class="table table-striped table-hover" ng-show="filteredJobs.length >= 1">
          <thead>
            <tr>
              <th>
                <a href="" ng-click="predicate = 'title'; setReverse()">
                  Title 
                  <span 
                      class="glyphicon glyphicon-arrow-up" 
                      ng-if="!reverse && predicate == 'title'">
                  </span>
                  <span 
                      class="glyphicon glyphicon-arrow-down" 
                      ng-if="reverse && predicate == 'title'">
                  </span>
                </a>
              </th>
              <th>
                <a href="" ng-click="predicate = 'created_at'; setReverse()">
                  Added
                  <span 
                      class="glyphicon glyphicon-arrow-up" 
                      ng-if="!reverse && predicate == 'created_at'">
                  </span>
                  <span 
                      class="glyphicon glyphicon-arrow-down" 
                      ng-if="reverse && predicate == 'created_at'">
                  </span>
                </a>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="job in 
              (filteredJobs = 
                  ( jobs | 
                  filter:query |
                  orderBy:predicate:reverse )
              )">
              <td>
                <span
                  class="label label-danger"
                  ng-if="todayFormatted == (job.created_at | date:'MMM dd yy')">NEW</span>
                <a href="/jobs/{{job.id}}">{{job.title}}</a>
                <span class="text-muted">{{job.origin}}</span>
              </td>
              <td>{{job.created_at | date:'MMM dd'}}</td>
            </tr>
          </tbody>
        </table>
        </div><!-- /.panel -->
      </div>
    </div><!-- /.row -->
  </div><!-- /.container -->
</div><!-- /.SearchCtrl -->

<br>

<!--
<%= link_to 'New Job', new_job_path %>
-->